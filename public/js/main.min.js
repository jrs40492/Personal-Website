let sections,pageHeight,pageWidth;const colors={red:0,blue:0,green:0};function init(){sections=document.getElementsByClassName("color-bg"),pageHeight=window.innerHeight/255,pageWidth=window.innerWidth/255,window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",orientationHandler,!1),sections[0].addEventListener("mousemove",e=>{const t=e.clientX,o=e.clientY;calcuateColorsByMouse(t,o),updateBackground(sections[0])})}document.addEventListener("DOMContentLoaded",init,!1);const orientationHandler=e=>{calcuateColorsByMotion(e.beta,e.gamma,e.alpha),updateBackground(sections[0])},calcuateColorsByMotion=(e,t,o)=>{colors.red=255-Math.abs(2*Math.round(e)-105),colors.blue=255-Math.abs(4*Math.round(t)-105),colors.green=255-Math.abs(Math.round(o)-105)},calcuateColorsByMouse=(e,t)=>{colors.red=255-Math.round(e/pageWidth),colors.green=Math.round(t/pageHeight),colors.blue=255-(colors.red+colors.green)/2},updateBackground=e=>{let t;switch(e.dataset.page){case"home":t=`linear-gradient(to bottom right, rgba(${colors.red}, 0, 0, 0.9), rgba(0, 0, ${colors.blue}, 0.7) 60%, rgba(0, ${colors.green}, 0, 0.7) 80%)`;break;case"navigation":t=`linear-gradient(to right, rgba(0, 0, ${colors.blue}, 1), rgba(${colors.red}, 0, 0, 1) 70%)`;break;case"contact":t=`linear-gradient(to bottom left, rgba(${colors.red}, 0, 0, 0.9), rgba(0, 0, ${colors.blue}, 0.7) 60%, rgba(0, ${colors.green}, 0, 0.7) 80%)`;break;default:t=`linear-gradient(to right, rgba(${colors.red}, 0, 0, 0.9), rgba(0, 0, ${colors.blue}, 0.7) 60%, rgba(0, ${colors.green}, 0, 0.7) 80%)`}e.style.backgroundImage=t},contactForm=document.getElementById("contact-form"),fields=document.querySelectorAll("input, textarea"),shipButton=document.getElementById("ship-button");contactForm&&contactForm.addEventListener("submit",e=>{e.preventDefault();let t={};fields.forEach(e=>{t[e.name]=e.value});const o=new XMLHttpRequest;o.open("POST","/send",!0),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(t)),o.onreadystatechange=function(){if(4==this.readyState){if(200==this.status)return console.log(o.responseText),shipButton.innerHTML="Shipped!",void(shipButton.disabled=!0);if(400==this.status){const e=JSON.parse(o.response);Object.keys(e).forEach(t=>{const o=e[t];addError(o.param,o.msg)})}}}});const addError=(e,t)=>{document.getElementsByName(e).forEach(e=>{e.classList.add("invalid");const o=e.nextSibling;o.innerHTML=t,o.style.display="block"})};fields.forEach(e=>{e.addEventListener("keyup",t=>{e.classList.remove("invalid"),e.nextSibling.style.display="none"})});let call,options={selector:"[data-background-image-url]",loadedClassName:"loaded",path:"/images/",webpSupported:!1};function BackgroundNode({node:e,loadedClassName:t}){const o=e.getAttribute("data-background-image-url"),n=options.webpSupported?"webp":"jpg";return{node:e,load:a=>{const r=new Image;r.onload=(a=a,void requestAnimationFrame(()=>{e.style.backgroundImage=`linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url(${options.path}${o}.${n})`,e.classList.add(t),a()})),r.src=o}};var a}function BackgroundLazyLoader({selector:e,loadedClassName:t}=options){let o=[].slice.apply(document.querySelectorAll(e)).map(e=>new BackgroundNode({node:e,loadedClassName:t}));const n=new IntersectionObserver((e,t)=>{e.forEach(({target:e,isIntersecting:n})=>{if(!n)return;let a=o.find(t=>t.node.isSameNode(e));a&&a.load(()=>{t.unobserve(e),(o=o.filter(t=>!t.node.isSameNode(e))).length||t.disconnect()})})});o.forEach(e=>n.observe(e.node))}Modernizr.on("webp",function(e){e&&(options.webpSupported=!0),BackgroundLazyLoader()});let scrollRate=10;document.onwheel=(()=>{clearInterval(call)});const scrollTo=e=>{const t=e-window.pageYOffset;t<0&&scrollRate>=0&&(scrollRate*=-1),scrollRate>=0?scrollRate+=.5:scrollRate-=.5,t<scrollRate&&t>0&&(scrollRate=t),0==t?clearInterval(call):window.scrollBy(0,scrollRate)},scrollListener=e=>{e.preventDefault(),scrollRate=25;const t=e.srcElement.dataset.id,o=document.getElementById(`${t}`).offsetTop;call=setInterval(()=>scrollTo(o),5)},buttons=document.getElementsByClassName("scroll-btn");Array.from(buttons).forEach(e=>{e.addEventListener("click",scrollListener)});const isOnScreen=e=>{const t=e.getBoundingClientRect();return t.top>=0&&t.top<=(window.innerHeight||document.documentElement.clientHeight)},isPastScreen=e=>{return e.getBoundingClientRect().top<=0};let elem;const projects=document.querySelectorAll(".project"),backToTopButton=document.getElementById("back-to-top-button");projects.forEach((e,t)=>{2===t&&(elem=e)}),window.addEventListener("scroll",e=>{isOnScreen(elem)||isPastScreen(elem)?backToTopButton.classList.add("show"):backToTopButton.classList.remove("show")});